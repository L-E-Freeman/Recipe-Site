let addIngButton = document.querySelector("#add_more_ingredients")

addIngButton.addEventListener('click', addIngForm)

// e is event.
function addIngForm(e) {
    // Prevent default action of button click so only addForm is executed.
    e.preventDefault()
    // incrementing form count as it is static in html
    ingFormCount++
    
    // Update the management form to use the correct value of TOTAL_FORMS
    // to allow extra forms to be saved. 
    let totalForms = document.getElementById("id_ingredients-TOTAL_FORMS")
    totalForms.setAttribute('value', ingFormCount+1)
    // selecting anything with id ingredientform
    let ingredientForm = document.querySelector("#ingredientform")
    // browser parses html sent from server in to DOM. 
    /* creating a virtual div element that isn't rendered on the page 
    but you can do stuff with it and you can manually add it to the html. */
    let ingContainer = document.createElement('div');
    // giving container the class ingredientinfo
    ingContainer.classList.add('ingredientinfo');
    /* insert HTML string created by django in to the container. parses 
    HTML generated by django, which generates a DOM tree, which can be inserted
    in to the DOM */
    ingContainer.insertAdjacentHTML("beforeend", emptyIngForm.replace(/__prefix__/g, ingFormCount))
    // adding the virtual DOM container to the actual DOM element included in the 
    // HTML and rendered on the page.
    ingredientForm.appendChild(ingContainer)

} 